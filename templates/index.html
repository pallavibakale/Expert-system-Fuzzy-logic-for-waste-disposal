<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzzy Waste Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Fuzzy Waste Management System</h1>
        <form id="waste-form">
            <div class="mb-3">
                <label for="fullness" class="form-label">Fullness (%)</label>
                <input type="range" class="form-range" id="fullness" min="0" max="100" step="1">
                <span id="fullness-value">50</span>%
            </div>
            <div class="mb-3">
                <label for="moisture" class="form-label">Moisture</label>
                <select id="moisture" class="form-select">
                    <option value="dry">Dry</option>
                    <option value="slightly_moist">Slightly Moist</option>
                    <option value="moderate">Moderate</option>
                    <option value="wet">Wet</option>
                    <option value="saturated">Saturated</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="toxicity" class="form-label">Toxicity</label>
                <select id="toxicity" class="form-select">
                    <option value="none">None</option>
                    <option value="mild">Mild</option>
                    <option value="moderate">Moderate</option>
                    <option value="high">High</option>
                    <option value="very_high">Very High</option>
                    <option value="severe">Severe</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="odor" class="form-label">Odor</label>
                <select id="odor" class="form-select">
                    <option value="none">None</option>
                    <option value="mild">Mild</option>
                    <option value="moderate">Moderate</option>
                    <option value="strong">Strong</option>
                    <option value="very_strong">Very Strong</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="weather" class="form-label">Weather</label>
                <select id="weather" class="form-select">
                    <option value="clear">Clear</option>
                    <option value="cloudy">Cloudy</option>
                    <option value="rainy">Rainy</option>
                    <option value="humid">Humid</option>
                    <option value="stormy">Stormy</option>
                </select>
            </div>
            <button type="button" id="submit-btn" class="btn btn-primary w-100">Submit</button>
        </form>
        <div id="result" class="mt-4 text-center">
            <h3 id="decision">Decision: </h3>
            <p id="urgency-score"></p>
        </div>
    </div>
    <script>
        // JavaScript for interactivity
        document.getElementById('fullness').addEventListener('input', function() {
            document.getElementById('fullness-value').innerText = this.value;
        });

        document.getElementById('submit-btn').addEventListener('click', async () => {
            const data = {
                fullness: document.getElementById('fullness').value,
                moisture: document.getElementById('moisture').value,
                toxicity: document.getElementById('toxicity').value,
                odor: document.getElementById('odor').value,
                weather: document.getElementById('weather').value
            };

            const response = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log("result", result);
            
            document.getElementById('decision').innerText = `Decision: ${result.decision}`;
            document.getElementById('urgency-score').innerText = `Urgency Score: ${result.urgency_score}%`;
        });
    </script>
</body>
</html>
